---
title: ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯æ¯æ—¥ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã—ã‚ˆã†
date: 2022-09-08T21:46:18+09:00
description: ã‚¿ã‚¤ãƒˆãƒ«é€šã‚Šã€ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’æ¯æ—¥ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã—ã¾ã™ã€‚
url: /blog/2022-09-08-ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯æ¯æ—¥ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã—ã‚ˆã†/
tags:
- shell
- zsh
- dotfiles
---	

æ¥­å‹™ã§ã¨ã‚ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒå¤ãè‡ªåˆ†ã®ç’°å¢ƒã§å‹•ã‹ãªã‹ã£ãŸã“ã¨ãŒã‚ã‚Šã€æ¯æ—¥ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã™ã‚‹ã‚ˆã†ã«ã—ãŸã€‚

<b>æœ€æ–°ãŒæœ€é«˜ã€‚</b>

å¹¸ã„ãªã“ã¨ã«ã€ã»ã¨ã‚“ã©ã®ãƒ„ãƒ¼ãƒ«ã‚„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯homebrewã¨ghqã§ç®¡ç†ã—ã¦ã„ãŸã®ã§ã€æ¯æ—¥ä¸€æ‹¬ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã™ã‚‹ã‚ˆã†ãªã‚³ãƒãƒ³ãƒ‰ã‚’å©ã„ã¦æ›´æ–°ã™ã‚‹ã ã‘ã§è‰¯ã•ãã†ã ã£ãŸã€‚
brewã‚‚ghqã‚‚é€”ä¸­ã§ã‚ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®æ›´æ–°ã«å¤±æ•—ã—ãŸå ´åˆã§ã‚‚ã€ãã“ã§çµ‚äº†ã›ãšå…¨éƒ¨ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«å¯¾ã—ã¦æ›´æ–°ã‚’è¡Œãªã£ã¦ãã‚Œã‚‹ã®ã§ç‰¹ã«ãã†ã„ã†å‡¦ç†ã‚’è‡ªåˆ†ã§æ›¸ãå¿…è¦ã‚‚ãªã‹ã£ãŸã€‚

ãªã®ã§å‰å›ã®ä¸€æ‹¬ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã‹ã‚‰1æ—¥çµŒã£ã¦ã„ãŸã‚‰è­¦å‘Šã‚’ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§å‡ºã™ã‚ˆã†ã«å®Ÿè£…ã—ãŸã€‚

![ScreenShot](/img/2022-09-08-update-packages-screenshot.png "ScreenShot")

æ¯å›ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãŒæ›´æ–°ã•ã‚Œã‚‹ãŸã³ã«ç¢ºèªå‡¦ç†ãŒå…¥ã‚‹ã®ã§å†—é•·ã«ã‚‚æ€ãˆã‚‹ã‘ã©ä»Šã®ã¨ã“ã‚å›°ã£ã¦ãªã„ã®ã§ã“ã®ã¾ã¾ã«ã™ã‚‹ã€‚

å®Ÿè¡Œã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚’è€ƒãˆã‚‹ã®ãŒã‚ã‚“ã©ãã•ããªã£ã¦ã—ã¾ã£ãŸã®ã§ã‚„ã‚ã¦ã—ã¾ã£ãŸã‘ã©ã€AppleScriptã§å®šæœŸå®Ÿè¡Œã™ã‚‹ã‚ˆã†ãªã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã„ãŸã»ã†ãŒã‚³ãƒãƒ³ãƒ‰æ‰“ã¤æ‰‹é–“ã‚‚ãªã„ã—è‰¯ã‹ã£ãŸã‹ã‚‚ã—ã‚Œãªã„ã€‚


## ã‚³ãƒ¼ãƒ‰

```shell
## .zshrc

# ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ
function update() {
  # homebrewã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ & brewãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ä¸€æ‹¬ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ
  echo " # Homebrew Packages"
  brew upgrade

  # ãƒªãƒã‚¸ãƒˆãƒªã®ä¸€æ‹¬ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ
  echo " # Git Repositories"
  ghq list | ghq get --update --parallel

  # æ›´æ–°æ—¥æ™‚ã‚’ãƒ•ã‚¡ã‚¤ãƒ«ã«æ®‹ã™
	# è‡ªåˆ†ã¯gheã§ç®¡ç†ã—ã¦ã„ã‚‹dotfileã®ãƒªãƒã‚¸ãƒˆãƒªé…ä¸‹ã«ç½®ãã‚ˆã†ã«ã—ã¦ã„ã‚‹ï¼ˆã‚‚ã¡ã‚ã‚“gitignoreã—ã¦ã‚‹ï¼‰
  date +%s > "$(ghq root)/github.com/yagijin/setting_files/last_updated"
}

# æœ€å¾Œã«ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã—ãŸæ™‚ã‹ã‚‰ä¸€å®šæ™‚é–“çµŒã£ã¦ã„ã‚‹ã‹åˆ¤å®šã™ã‚‹
function should_update() {
  now=`date +%s`
  date_file="$(ghq root)/github.com/yagijin/setting_files/last_updated"
	# 86400ç§’ã¯1æ—¥
  will_update="$(($(cat $date_file)+86400))"
  if [ $now -gt $will_update ]
  then
    echo ' ##################################################\n' \
      'It'"'"'s Time.\n You Should Update Packages Using #update CommandğŸ«µ\n' \
      '##################################################'
  fi
}

# zshã®hooké–¢æ•°
precmd () { 
  should_update
}

```


